# 안전점검 - 임시저장 vs 저장완료 차이점

날짜: 2025-11-05

## 핵심 개념 정리

### 1. 임시저장 (Draft)

**의미**: 점검을 완료하지 못했을 때 중간 저장

**언제 사용하나요?**
- 점검을 시작했지만 다 작성하지 못했을 때
- 나중에 계속 작성하고 싶을 때
- 서명을 하지 않아도 저장 가능

**예시 상황**:
```
오전 작업전 점검을 하다가 급한 일이 생겨서 중단
→ "임시 저장" 클릭
→ 나중에 다시 와서 계속 작성 가능
```

**상태**: `draft`
- EP/Admin에게 **보이지 않음**
- 점검원 본인만 "점검 내역" 탭에서 확인 가능
- 언제든 수정하고 계속 작성 가능

---

### 2. 저장 완료 (Submitted)

**의미**: 점검을 모두 완료하고 최종 제출

**언제 사용하나요?**
- 모든 필수 항목을 다 작성했을 때
- 점검원 이름과 서명을 완료했을 때
- EP에게 확인 요청을 보낼 때

**예시 상황**:
```
오전 작업전 점검을 모두 완료
→ 서명 입력
→ "저장 완료" 클릭 (녹색 버튼)
→ EP에게 제출됨
```

**상태**: `submitted`
- EP/Admin에게 **보임** → 확인 및 승인 가능
- 점검원도 "점검 내역" 탭에서 확인 가능
- **수정 불가** (이미 제출됨)

---

## 작업 시점 (작업전/작업중/작업후)

### 개념

**하나의 점검에서 여러 시점을 체크**

예를 들어, "타이어 공기압 점검" 항목이 있다면:
- **작업전**: 아침에 작업 시작 전 점검 → "작업전" 선택 → 결과 입력 → 임시저장
- **작업중**: 점심시간에 점검 → 같은 항목에서 "작업중" 선택 → 결과 입력 → 임시저장
- **작업후**: 저녁에 작업 종료 후 점검 → "작업후" 선택 → 결과 입력 → **저장 완료**

### 중요!

**하나의 점검 기록에 여러 시점의 결과가 모두 저장됨**

```
점검 ID: ABC123
- 타이어 공기압 (작업전) → 양호
- 타이어 공기압 (작업중) → 양호
- 타이어 공기압 (작업후) → 조정 (공기압 보충함)
```

---

## 워크플로우 예시

### 시나리오: 하루 3회 점검이 필요한 경우

#### 1단계: 오전 작업전 점검 (09:00)
```
1. 차량번호로 장비 검색
2. 점검 빈도: "일일" 선택
3. 각 항목 작성:
   - 작업 시점: "작업전" 선택 (보라색 버튼)
   - 결과: "양호" 선택 (녹색 버튼)
   - 조치사항: 필요시 입력
4. "임시 저장" 클릭 → Draft 상태
```

**결과**:
- 점검 ID 생성됨 (예: `INS-001`)
- 상태: `draft`
- 점검 내역 탭에서 오렌지색 "임시저장" 배지로 보임

#### 2단계: 점심시간 작업중 점검 (12:00)
```
1. "점검 내역" 탭 클릭
2. 아까 저장한 점검 찾기 (임시저장 상태)
3. "상세보기" → "수정" (또는 다시 작성)
4. 각 항목 작성:
   - 작업 시점: "작업중" 선택
   - 결과 입력
5. "임시 저장" 클릭
```

**결과**:
- 같은 점검 ID (`INS-001`)에 추가됨
- 여전히 `draft` 상태
- 작업전 + 작업중 데이터가 모두 저장됨

#### 3단계: 저녁 작업후 점검 (18:00)
```
1. "점검 내역" 탭에서 같은 점검 찾기
2. 각 항목 작성:
   - 작업 시점: "작업후" 선택
   - 결과 입력
3. 점검원 이름 확인 (자동 입력됨)
4. 서명 입력
5. "저장 완료" 클릭 (녹색 버튼)
```

**결과**:
- 점검 ID `INS-001`의 상태가 `submitted`로 변경
- EP 화면에서 이제 보임
- 보라색 "제출됨" 배지로 표시됨

---

## 버튼 정리

| 버튼 | 색상 | 기능 | 상태 변화 | EP/Admin 보임? |
|------|------|------|-----------|----------------|
| **임시 저장** | 회색 테두리 | 중간 저장, 계속 작성 가능 | → `draft` | ❌ 안보임 |
| **저장 완료** | 녹색 | 최종 제출, 수정 불가 | → `submitted` | ✅ 보임 |

---

## 점검 내역 화면

### 통계 카드 (4개)

1. **전체** (파란색) - 모든 점검 개수
2. **임시저장** (오렌지색) - draft 상태
3. **제출됨** (보라색) - submitted 상태 (EP 확인 대기)
4. **확인완료** (녹색) - reviewed 상태 (EP가 승인함)

### 상태별 배지 색상

- 🟠 **임시저장** (오렌지) - 작성 중
- 🟣 **제출됨** (보라색) - EP 확인 대기
- 🟢 **확인완료** (녹색) - EP 승인 완료

---

## FAQ

### Q1: 임시저장한 점검을 다시 찾으려면?
**A**: 점검원 화면 하단의 "점검 내역" 탭 → 오렌지색 "임시저장" 배지가 붙은 항목 찾기

### Q2: 임시저장과 저장완료를 여러번 할 수 있나요?
**A**:
- **임시저장**: 여러번 가능 (같은 점검 ID에 계속 업데이트됨)
- **저장완료**: 한번만 가능 (제출 후 수정 불가)

### Q3: 작업전, 작업중, 작업후를 각각 별도로 저장하나요?
**A**: 아니요! **하나의 점검에 모두 저장됩니다.**
- 아침: 작업전 선택 → 임시저장
- 점심: 작업중 선택 → 임시저장 (같은 점검에 추가)
- 저녁: 작업후 선택 → 저장완료 (최종 제출)

### Q4: 저장완료를 누르면 EP에게 바로 보이나요?
**A**: 네! 저장완료를 누르면:
1. 상태가 `submitted`로 변경
2. EP의 "안전점검 확인" 메뉴에 나타남
3. Admin의 "안전점검 내역"에도 나타남

### Q5: 점검원 이름을 매번 입력해야 하나요?
**A**: 아니요! 로그인한 사용자 이름이 자동으로 입력됩니다.

---

## 주요 수정사항 (2025-11-05)

1. ✅ 점검원 이름 자동 입력
2. ✅ 작업 시점 선택 UI 추가 (보라색 버튼)
3. ✅ 버튼 명칭 변경: "점검 제출" → "저장 완료"
4. ✅ 점검 내역에 임시저장 항목도 표시
5. ✅ 통계 카드 4개로 확장 (전체/임시저장/제출됨/확인완료)
6. ✅ 상태별 색상 구분 (오렌지/보라/녹색)

---

## 테스트 시나리오

### 시나리오 1: 처음부터 끝까지 작성

1. 점검원 로그인
2. 차량 검색 → 장비 선택
3. 모든 항목 작성 (작업전 선택)
4. 서명 입력
5. **"저장 완료"** 클릭
6. EP 로그인 → 제출된 점검 확인

### 시나리오 2: 3회 나눠서 작성

1. 오전: 작업전 선택 → 임시저장
2. 점심: 점검 내역 찾기 → 작업중 선택 → 임시저장
3. 저녁: 작업후 선택 → 서명 → 저장 완료
4. EP에서 확인

### 시나리오 3: 중간에 취소하고 다시 시작

1. 점검 시작 → 일부 작성 → 임시저장
2. 나중에 점검 내역에서 찾기
3. 삭제 or 계속 작성
