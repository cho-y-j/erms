# Worker ì´ë©”ì¼ ë¡œê·¸ì¸ ì™„ì „ êµ¬í˜„ âœ…

## ğŸ¯ í•µì‹¬ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ:
- Adminì´ Worker ë“±ë¡ ì‹œ **ì´ë©”ì¼ì„ ìˆ˜ì§‘í•˜ì§€ ì•ŠìŒ**
- í•˜ì§€ë§Œ ë¡œê·¸ì¸ì€ **ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸** í•„ìš”
- â†’ Workerê°€ ë¡œê·¸ì¸í•  ìˆ˜ ì—†ìŒ! âŒ

### í•´ê²°:
- âœ… Worker ë“±ë¡ ì‹œ **ì´ë©”ì¼ + ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸** ì…ë ¥
- âœ… **users í…Œì´ë¸”ì— ë¡œê·¸ì¸ ê³„ì • ìë™ ìƒì„±**
- âœ… WorkerëŠ” ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸ ê°€ëŠ¥

---

## ğŸ“ ì™„ë£Œëœ ì‘ì—…

### 1. âœ… Worker ë“±ë¡ í¼ ê°œì„ 

**íŒŒì¼**: `client/src/pages/Workers.tsx`

**ì¶”ê°€ëœ í•„ë“œ:**
```
ğŸ“§ ì´ë©”ì¼ (ë¡œê·¸ì¸ ID) * - í•„ìˆ˜
ğŸ”’ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ * - í•„ìˆ˜ (ìµœì†Œ 6ì)
ğŸ“± í•¸ë“œí° ë²ˆí˜¸ * - í•„ìˆ˜
```

**UI:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì´ë©”ì¼ (ë¡œê·¸ì¸ ID) *             â”‚
â”‚ [worker@company.com]             â”‚
â”‚ Workerê°€ ëª¨ë°”ì¼ ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ *                  â”‚
â”‚ [ìµœì†Œ 6ì ì´ìƒ]                  â”‚
â”‚ Workerê°€ ë¡œê·¸ì¸ í›„ ë³€ê²½ ê°€ëŠ¥      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í•¸ë“œí° ë²ˆí˜¸ *                    â”‚
â”‚ [010-1234-5678]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Worker ëª©ë¡ì— ì´ë©”ì¼ ì»¬ëŸ¼ ì¶”ê°€:**
```
| ì´ë¦„   | ì´ë©”ì¼              | ì¸ë ¥ ìœ í˜• | ë©´í—ˆë²ˆí˜¸ |
|--------|---------------------|-----------|----------|
| ê¹€ê¸°ì‚¬ | worker@company.com  | ìš´ì „ê¸°ì‚¬  | 12-34-56 |
```

---

### 2. âœ… ì„œë²„: ìë™ ê³„ì • ìƒì„±

**íŒŒì¼**: `server/routers.ts`

**ë³€ê²½ ì‚¬í•­:**

#### A. `workers.create` - Worker ë“±ë¡
```typescript
create: protectedProcedure
  .input(
    z.object({
      workerTypeId: z.string(),
      name: z.string(),
      email: z.string().email(),        // â† ì¶”ê°€
      password: z.string().min(6),      // â† ì¶”ê°€
      licenseNum: z.string().optional(),
      licenseStatus: z.string().optional(),
    })
  )
  .mutation(async ({ input, ctx }) => {
    const id = nanoid();
    const { email, password, ...workerData } = input;
    
    // 1. users í…Œì´ë¸”ì— ë¡œê·¸ì¸ ê³„ì • ìƒì„±
    const userId = nanoid();
    await db.createUser({
      id: userId,
      email,
      password,
      role: "worker",
      name: input.name,
      companyId: ctx.user.companyId,
      pin: "0000",  // PIN ê¸°ë³¸ê°’
    });
    
    // 2. workers í…Œì´ë¸”ì— Worker ë“±ë¡
    await db.createWorker({ 
      id, 
      ...workerData, 
      pinCode: "0000",  // PIN ê¸°ë³¸ê°’
      ownerId: ctx.user.id 
    });
    
    return { id, userId };
  })
```

#### B. `workers.createWithDocs` - Worker + ì„œë¥˜ ë“±ë¡
```typescript
// ë™ì¼í•˜ê²Œ email, password ì¶”ê°€
// users í…Œì´ë¸”ì— ê³„ì • ìƒì„± í›„
// workers í…Œì´ë¸”ì— Worker ë“±ë¡
```

---

## ğŸ¯ ì‘ë™ ë°©ì‹

### Admin: Worker ë“±ë¡

```
1. Workers í˜ì´ì§€ â†’ [+ Worker ë“±ë¡]

2. ì •ë³´ ì…ë ¥:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ì¸ë ¥ ìœ í˜•: ìš´ì „ê¸°ì‚¬          â”‚
   â”‚ ì´ë¦„: ê¹€ê¸°ì‚¬                 â”‚
   â”‚ ì´ë©”ì¼: worker@company.com   â”‚ â† í•„ìˆ˜!
   â”‚ ë¹„ë°€ë²ˆí˜¸: Test1234!          â”‚ â† í•„ìˆ˜!
   â”‚ í•¸ë“œí°: 010-1234-5678        â”‚
   â”‚ ë©´í—ˆë²ˆí˜¸: 12-34-567890       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. [Worker ë“±ë¡] í´ë¦­

4. ì‹œìŠ¤í…œ ìë™ ì²˜ë¦¬:
   âœ… users í…Œì´ë¸”ì— ë¡œê·¸ì¸ ê³„ì • ìƒì„±
      - email: worker@company.com
      - password: (ì•”í˜¸í™”ëœ Test1234!)
      - role: worker
      - pin: 0000
   
   âœ… workers í…Œì´ë¸”ì— Worker ì •ë³´ ì €ì¥
      - name: ê¹€ê¸°ì‚¬
      - pin_code: 0000
      - license_num: 12-34-567890
```

---

### Worker: ëª¨ë°”ì¼ ë¡œê·¸ì¸

```
1. ëª¨ë°”ì¼ ì•± ì‹¤í–‰
   http://localhost:3000/mobile/login

2. ë¡œê·¸ì¸:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ì´ë©”ì¼                       â”‚
   â”‚ [worker@company.com]        â”‚ â† Adminì´ ë“±ë¡í•œ ì´ë©”ì¼
   â”‚                              â”‚
   â”‚ ë¹„ë°€ë²ˆí˜¸                     â”‚
   â”‚ [Test1234!]                 â”‚ â† Adminì´ ì„¤ì •í•œ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸
   â”‚                              â”‚
   â”‚ â˜‘ï¸ ë¡œê·¸ì¸ ìœ ì§€               â”‚
   â”‚                              â”‚
   â”‚ [ë¡œê·¸ì¸]                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ë¡œê·¸ì¸ ì„±ê³µ! â†’ Worker ë©”ì¸ í™”ë©´

4. ë‹¤ìŒë¶€í„°ëŠ” ìë™ ë¡œê·¸ì¸! âœ¨
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### 1ï¸âƒ£ Worker ë“±ë¡ í…ŒìŠ¤íŠ¸

```
URL: http://localhost:3000/workers

1. [+ Worker ë“±ë¡] í´ë¦­
2. ì •ë³´ ì…ë ¥:
   - ì¸ë ¥ ìœ í˜•: ìš´ì „ê¸°ì‚¬
   - ì´ë¦„: ê¹€ê¸°ì‚¬
   - ì´ë©”ì¼: test.worker@company.com
   - ë¹„ë°€ë²ˆí˜¸: Test1234!
   - í•¸ë“œí°: 010-1234-5678

3. [Worker ë“±ë¡] í´ë¦­

4. í™•ì¸:
   âœ… Worker ëª©ë¡ì— í‘œì‹œ
   âœ… ì´ë©”ì¼ ì»¬ëŸ¼ì— ì´ë©”ì¼ í‘œì‹œ
   âœ… users í…Œì´ë¸”ì— ê³„ì • ìƒì„± í™•ì¸ (Supabase)
   âœ… workers í…Œì´ë¸”ì— Worker ì •ë³´ ì €ì¥ í™•ì¸
```

### 2ï¸âƒ£ ëª¨ë°”ì¼ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸

```
URL: http://localhost:3000/mobile/login

1. ë“±ë¡í•œ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸:
   - ì´ë©”ì¼: test.worker@company.com
   - ë¹„ë°€ë²ˆí˜¸: Test1234!
   - â˜‘ï¸ ë¡œê·¸ì¸ ìœ ì§€

2. [ë¡œê·¸ì¸] í´ë¦­

3. í™•ì¸:
   âœ… Worker ë©”ì¸ í™”ë©´ í‘œì‹œ
   âœ… ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ â†’ ìë™ ë¡œê·¸ì¸
   âœ… localStorageì— í† í° ì €ì¥ í™•ì¸
```

### 3ï¸âƒ£ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ í…ŒìŠ¤íŠ¸

```
Worker ë¡œê·¸ì¸ í›„:

ë°ìŠ¤í¬í†±: http://localhost:3000/my-profile
ëª¨ë°”ì¼: http://localhost:3000/mobile/profile

1. "ë¹„ë°€ë²ˆí˜¸ ë³€ê²½" ì„¹ì…˜
2. ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. [ë¹„ë°€ë²ˆí˜¸ ë³€ê²½] í´ë¦­
4. ë¡œê·¸ì•„ì›ƒ â†’ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ í™•ì¸
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸

### users í…Œì´ë¸”
```sql
SELECT id, email, role, name, pin
FROM users
WHERE email = 'test.worker@company.com';
```

**ê²°ê³¼:**
```
| id     | email                    | role   | name   | pin  |
|--------|--------------------------|--------|--------|------|
| abc123 | test.worker@company.com  | worker | ê¹€ê¸°ì‚¬ | 0000 |
```

### workers í…Œì´ë¸”
```sql
SELECT id, name, pin_code, license_num
FROM workers
WHERE name = 'ê¹€ê¸°ì‚¬';
```

**ê²°ê³¼:**
```
| id     | name   | pin_code | license_num  |
|--------|--------|----------|--------------|
| def456 | ê¹€ê¸°ì‚¬ | 0000     | 12-34-567890 |
```

---

## ğŸ”„ í¸ì§‘ ëª¨ë“œ

Worker ì •ë³´ í¸ì§‘ ì‹œ:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì´ë©”ì¼: worker@company.com       â”‚ â† ìˆ˜ì • ê°€ëŠ¥
â”‚                                  â”‚
â”‚ ìƒˆ ë¹„ë°€ë²ˆí˜¸ (ë³€ê²½ ì‹œë§Œ ì…ë ¥)     â”‚
â”‚ [                ]               â”‚ â† ë¹„ì›Œë‘ë©´ ë³€ê²½ ì•ˆ í•¨
â”‚ ë³€ê²½í•˜ì§€ ì•Šìœ¼ë ¤ë©´ ë¹„ì›Œë‘ì„¸ìš”      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì§•:**
- ì´ë©”ì¼ì€ ìˆ˜ì • ê°€ëŠ¥
- ë¹„ë°€ë²ˆí˜¸ëŠ” ì„ íƒì‚¬í•­ (ë³€ê²½í•˜ë ¤ë©´ ì…ë ¥)
- ë¹„ì›Œë‘ë©´ ê¸°ì¡´ ë¹„ë°€ë²ˆí˜¸ ìœ ì§€

---

## ğŸš¨ ê¸°ì¡´ Worker ë§ˆì´ê·¸ë ˆì´ì…˜

### ë¬¸ì œ:
ê¸°ì¡´ì— ë“±ë¡ëœ WorkerëŠ” **ì´ë©”ì¼ì´ ì—†ìŒ**

### í•´ê²°:
ìˆ˜ë™ìœ¼ë¡œ ì´ë©”ì¼ ì¶”ê°€ í•„ìš”

#### A. Supabaseì—ì„œ ì§ì ‘ ì¶”ê°€

```sql
-- 1. users í…Œì´ë¸”ì— ê³„ì • ìƒì„±
INSERT INTO users (id, email, password, role, name, company_id, pin)
VALUES (
  'new-user-id',
  'worker1@company.com',
  crypt('Initial123!', gen_salt('bf')),  -- ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
  'worker',
  'ê¸°ì¡´Workerì´ë¦„',
  'company-id',
  '0000'
);

-- 2. workers í…Œì´ë¸”ì— ì´ë©”ì¼ ì—…ë°ì´íŠ¸ (ìˆë‹¤ë©´)
UPDATE workers
SET email = 'worker1@company.com'
WHERE id = 'worker-id';
```

#### B. Adminì´ Worker í¸ì§‘

```
1. Workers ëª©ë¡ â†’ í¸ì§‘ ì•„ì´ì½˜ í´ë¦­
2. ì´ë©”ì¼ ì…ë ¥: worker1@company.com
3. ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ ì…ë ¥: Initial123!
4. [ì €ì¥]
```

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í´ë¼ì´ì–¸íŠ¸
- [x] Worker ë“±ë¡ í¼ì— ì´ë©”ì¼ í•„ë“œ ì¶”ê°€
- [x] Worker ë“±ë¡ í¼ì— ë¹„ë°€ë²ˆí˜¸ í•„ë“œ ì¶”ê°€
- [x] formDataì— email, password ì¶”ê°€
- [x] resetFormì— email, password ì¶”ê°€
- [x] handleEditì— email, password ì¶”ê°€
- [x] Worker ëª©ë¡ì— ì´ë©”ì¼ ì»¬ëŸ¼ ì¶”ê°€
- [x] í¸ì§‘ ëª¨ë“œì—ì„œ ë¹„ë°€ë²ˆí˜¸ ì„ íƒì‚¬í•­ ì²˜ë¦¬

### ì„œë²„
- [x] workers.create inputì— email, password ì¶”ê°€
- [x] workers.createì—ì„œ users í…Œì´ë¸” ê³„ì • ìƒì„±
- [x] workers.createWithDocs inputì— email, password ì¶”ê°€
- [x] workers.createWithDocsì—ì„œ users í…Œì´ë¸” ê³„ì • ìƒì„±
- [x] PIN ê¸°ë³¸ê°’ 0000 ì„¤ì • ìœ ì§€

### ëª¨ë°”ì¼
- [x] ëª¨ë°”ì¼ ë¡œê·¸ì¸ ì´ë©”ì¼ ë°©ì‹ìœ¼ë¡œ ë³€ê²½
- [x] ìë™ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„
- [x] ë‚´ì •ë³´ì—ì„œ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê°€ëŠ¥

---

## ğŸ‰ ìµœì¢… ê²°ê³¼

### ì´ì „ (ë¬¸ì œ):
```
âŒ Adminì´ Worker ë“±ë¡ ì‹œ ì´ë©”ì¼ ë¯¸ìˆ˜ì§‘
âŒ Workerê°€ ë¡œê·¸ì¸í•  ìˆ˜ ì—†ìŒ
âŒ PINë§Œìœ¼ë¡œëŠ” ë³´ì•ˆ ì·¨ì•½
```

### í˜„ì¬ (í•´ê²°):
```
âœ… Adminì´ Worker ë“±ë¡ ì‹œ ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
âœ… users í…Œì´ë¸”ì— ë¡œê·¸ì¸ ê³„ì • ìë™ ìƒì„±
âœ… Workerê°€ ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸
âœ… í•œ ë²ˆ ë¡œê·¸ì¸ í›„ ìë™ ë¡œê·¸ì¸
âœ… ë³´ì•ˆ ê°•í™” (â­â­â­â­â­)
```

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ë°©ë²•

### ì¦‰ì‹œ í…ŒìŠ¤íŠ¸:

```
1. Worker ë“±ë¡:
   http://localhost:3000/workers
   
   ì´ë¦„: í…ŒìŠ¤íŠ¸Worker
   ì´ë©”ì¼: test@company.com
   ë¹„ë°€ë²ˆí˜¸: Test1234!
   í•¸ë“œí°: 010-1234-5678

2. ëª¨ë°”ì¼ ë¡œê·¸ì¸:
   http://localhost:3000/mobile/login
   
   ì´ë©”ì¼: test@company.com
   ë¹„ë°€ë²ˆí˜¸: Test1234!
   â˜‘ï¸ ë¡œê·¸ì¸ ìœ ì§€

3. ì„±ê³µ! ğŸ‰
```

---

## ğŸš€ ì™„ë£Œ!

ëª¨ë“  ë¬¸ì œê°€ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!

**í•µì‹¬ ë³€ê²½ì‚¬í•­:**
1. âœ… Worker ë“±ë¡ ì‹œ ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
2. âœ… users í…Œì´ë¸”ì— ë¡œê·¸ì¸ ê³„ì • ìë™ ìƒì„±
3. âœ… WorkerëŠ” ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸ ê°€ëŠ¥
4. âœ… ìë™ ë¡œê·¸ì¸ ì§€ì›
5. âœ… Worker ëª©ë¡ì— ì´ë©”ì¼ í‘œì‹œ

**ë³´ì•ˆ ê°œì„ :**
- â­â­ (PIN 4ìë¦¬) â†’ â­â­â­â­â­ (ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸)
- ì¤‘ë³µ ë¶ˆê°€ (ì´ë©”ì¼ì€ ê³ ìœ )
- Worker ê°„ ëª…í™•í•œ êµ¬ë¶„

ì´ì œ ì™„ë²½í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤! ğŸŠ







